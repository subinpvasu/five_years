$(document).ready(function(){initPagination();initClearForm();initNavUnderlined();initPriceBox();initCustomForms();initPreferances();initUsersProfile();initAutocomplete();initTabs();addField();initColumaizer();initOpenClose();initAccordion();initSearch();initLoginOverlay();initSmoothScroll();initForgotPassword();initPopupOverlay();});var presetLoading=false;function ucwords(str){return(str+'').replace(/^([a-z])|\s+([a-z])/g,function($1){return $1.toUpperCase();});}
function initForgotPassword()
{$('a#forgot_password').click(function(){if($('#user_login').val()=='')
alert('Please enter your username.');else
{$.post('login.php',{'action':'recover','username':$('#user_login').val()},function(result){if(result.status=='OK')
alert('Your login details has been sent to your e-mail.');else
alert('This username is not registered with My Instore Radio');},'json');}
return false;});}
function initSmoothScroll(){$("a.smooth").click(function(){$.scrollTo(this.hash,1500,{easing:"easeOutExpo"});$(this.hash).find("span.message").text(this.title);return false;});}
function initPopupOverlay(){$('a#terms_of_use').click(function(){$('.popup_overlay').fadeIn(1000,function(res){});return false;});}
function initLoginOverlay(){$('div#login_overlay #cancel').click(function(){$('div#login_overlay').fadeOut(1000);return false;});$('a#login').click(function(){$('div#login_overlay').fadeIn(1000,function(res){$('#user_login').focus();});return false;});}
function initSearch(){var _input=$('input.search-input');var found='';var _holder=$('.content-hold');var _el=_holder.children();function Search(found){_el.each(function(i){var text=$(this).text().toLowerCase();if(text.indexOf(found.toLowerCase())!=-1)$(this).show();else $(this).hide();});};$('.ui-autocomplete').css({visibility:'hidden'})
$('.ui-autocomplete').click(function(){Search(_input.val());});_input.keyup(function(e){Search($(this).val());});}
function initAccordion(){if($(".accordion").length!=0){$('ul.accordion').accordion({active:".selected",autoHeight:false,header:".opener",collapsible:true,event:"click"});}}
function initColumaizer(){jQuery('.slide-box > .block > .hold').each(function(){var item=jQuery(this);item.columnize({width:310});})}
function addField(){$('div.add-box a').each(function(){var _field=$(this).parent().find('div.file1');$(this).click(function(){var _clone=_field.clone();$(this).parent('div').prepend(_clone);_clone.show();return false;});});}
function initAutocomplete(){var availableTags=["account","ipsum","vote","image","ActionScript","AppleScript","Asp","BASIC","C","C++","Clojure","COBOL","ColdFusion","Erlang","Fortran","Groovy","Haskell","Java","JavaScript","Lisp","Perl","PHP","Python","Ruby","Scala","Scheme"];$('.search-input').each(function(){$(this).autocomplete({source:availableTags});});}
function initUsersProfile(){var _yourAccount='limited';$('.payment-row').eq(0).find('.box input:radio').each(function(){if($(this).attr('checked')){$(this).parents('.box').addClass('active');var _startPrice=$(this).parents('.box').find('.start-price').html();if(_startPrice){_startPrice=_startPrice.split(',');if(_startPrice!='trial')
$('#payment_subscribe').show();else
$('#payment_subscribe').hide();var _int=_startPrice[1]*0.01;if(_startPrice[1]){_startPrice=_startPrice[0]*1+_int;}
else{_startPrice=_startPrice[0]*1;}
_startPrice.toFixed(2);}
else{_startPrice=0;}}else{$(this).parents('.box').removeClass('active');};$(this).change(function(){$('.payment-row').eq(0).find('.box input:radio').each(function(){if($(this).attr('checked')){$(this).parents('.box').addClass('active');_yourAccount=$(this).attr('id');if(_yourAccount!='trial')
$('#payment_subscribe').show();else
$('#payment_subscribe').hide();var _startPrice=$(this).parents('.box').find('.start-price').html();if(_startPrice){_startPrice=_startPrice.split(',');var _int=_startPrice[1]*0.01;if(_startPrice[1]){_startPrice=_startPrice[0]*1+_int;}
else{_startPrice=_startPrice[0]*1;}
_startPrice.toFixed(2);}
else{_startPrice=0;}}else{$(this).parents('.box').removeClass('active');};});});});var _list=$('.payment-col input:radio');_list.each(function(){var _h=$(this).parents('.box').next('.closed').height();if($(this).attr('checked')){$(this).parents('.box').next('.closed').height(_h);}else{$(this).parents('.box').next('.closed').height(0);};$(this).change(function(){_list.each(function(){if($(this).attr('checked')){$(this).parents('.box').next('.closed').animate({height:_h},{duration:300,queue:false});}else{$(this).parents('.box').next('.closed').animate({height:0},{duration:300,queue:false});};});});});$(".user .sliders-holder .slidebar").bind("slidechange",function(event,ui){CheckAccaunt();});$('.user .check-box input[type=checkbox]').bind("change",function(){CheckAccaunt();});function CheckAccaunt(){if(_yourAccount=='limited'){$('.upgrade').show();$('.upgrade .txt').click(function(){$('ul.tabset li a').eq(0).click();$('.upgrade').hide();});};};};function editFile(){return;var _windowEdit=$('.file-edit');var _addCatBox=_windowEdit.find('.file1');var _windowSchedule=$('.schedule');$('.table-date .col').each(function(){var _buttonEdit=$(this).find('a.edit');_buttonEdit.click(function(){_windowEdit.slideDown(300);return false;});_windowEdit.find('.add-box > a').click(function(){_addCatBox.slideDown(300);return false;});var _buttonSchedule=$(this).find('.track-menu a').eq(1);_buttonSchedule.click(function(){_windowSchedule.slideDown(300);return false;});});};function initPagination(){$('.media-box, .mus-admin, .profiles-admin').each(function(){var _hold=$(this);var _ajaxHolder=_hold.find('.table-date tbody');var _holder=_hold.find('.pagination');var _prev=_holder.find('.prev a');var _prevAll=_holder.find('.prev-all a');var _next=_holder.find('.next a');var _nextAll=_holder.find('.next-all a');var _pages=_holder.find('.pages ul a');var _vis=2;var _a=_pages.index(_pages.filter('.active'));var ascClass='sort-asc';var descClass='sort-desc';var _table=_hold.find('div.sort-table table:eq(0)');_table.each(function(){var _th=$(this).find('thead th');var _defSort=[];_th.each(function(ind){var dir=-1;if($(this).hasClass(ascClass))dir=1;else if($(this).hasClass(descClass))dir=0;if(dir!=-1)_defSort.push([ind,dir]);});$(this).tablesorter({sortList:_defSort,cancelSelection:true,cssAsc:ascClass,cssDesc:descClass,cssHeader:'sort-def',textExtraction:function(node){return $(node).text();}});});initLoading(_a);function initLoading(i){_pages.removeClass('active').eq(i).addClass('active');if(i<_pages.length-_vis-1){_pages.show().filter(':lt('+i+')').hide();_pages.filter(':gt('+(i+_vis)+')').hide();}else{_pages.show().filter(':lt('+(_pages.length-_vis-1)+')').hide();}
if(!_pages.eq(i).hasClass('ajax-loaded')){var _url=_pages.eq(i).attr('href');$.ajax({url:_url,type:"POST",dataType:"html",success:function(msg){_ajaxHolder.children().hide();_ajaxHolder.append(msg);_ajaxHolder.find('input:radio').customRadio();_ajaxHolder.find('input:checkbox').customCheckbox();_ajaxHolder.find('tr').each(function(){if(!$(this).hasClass('ajax-loaded')){$(this).addClass('ajax-loaded '+i);}});var selectDrop=_table.find('.drop-box');openSelect(selectDrop);editFile();_table.trigger("update");_pages.eq(i).addClass('ajax-loaded');},error:function(){alert('AJAX Error!');}})}else{_ajaxHolder.find('tr').each(function(){if($(this).hasClass(i)){$(this).show();}else{$(this).hide();}});};};_pages.click(function(){_a=_pages.index($(this));initLoading(_a);return false;});_prev.click(function(){_a--;if(_a<0)_a=0;initLoading(_a);return false;})
_next.click(function(){_a++;if(_a>_pages.length-1)_a=_pages.length-1;initLoading(_a);return false;})
_prevAll.click(function(){_a=0;initLoading(_a);return false;})
_nextAll.click(function(){_a=_pages.length-1;initLoading(_a);return false;});function openSelect(dropHolder){var _drops=$('div.drop');$('body').click(function(e){var target=$(e.target);var f=false;target.parents().each(function(){if($(this).hasClass('drop'))f=true;})
if(!f){_drops.hide();}});dropHolder.each(function(){var _hold=$(this);_opener=_hold.find('a.open');_opener.click(function(){dropHolder.css('zIndex',1);_hold.css('zIndex',999);_drops.hide();_drop=$(this).siblings('div.drop');if(_drop.is(':visible')){_drop.hide();}
else{_drop.show();f=true;_drop.unbind('click');_drop.click(function(){f=false;})}
return false;});});};});};function initTabs(){var _list=$('ul.tabset li a');var _hList=$('ul.tabset').outerHeight(true);var _a=_list.index(_list.filter('active'));if(_a==-1){_a=0}
var _box=$('div.tabs-holder');if($.browser.msie&&$.browser.version<9)_box.hide().eq(_a).show();else _box.hide().css({opacity:0}).eq(_a).show().css({opacity:1});_list.removeClass('active').eq(_a).addClass('active');_list.each(function(_i,_this){$(this).click(function(){if($.browser.msie&&$.browser.version<9)_box.hide();else _box.animate({opacity:0},{queue:false,duration:500}).hide();_list.removeClass(' active');if($.browser.msie&&$.browser.version<9)$('#'+_list.eq(_i).attr('href')).show().parent('div').css({height:'auto'});else $('#'+_list.eq(_i).attr('href')).animate({opacity:1},{queue:false,duration:500}).show().parent('div').animate({height:_box.eq(_i).height()+_hList},{queue:false,duration:500,complete:function(){$(this).height('auto')}});_list.eq(_i).addClass(' active');try{file_uploader.refresh();}catch(e){}
return false;});});};function initCustomForms(){$('.customSelect').customSelect();$('input[type=checkbox]').customCheckbox();$('input[type=radio]').customRadio();}
function setSliderValue(genrecode,val)
{$('#genre_'+genrecode).trigger('click');$('.sliders-holder').find('.genre_'+genrecode+' .slidebar').slider("value",val);$('#range-genre_'+genrecode).val(val);}
function SlidersChanged()
{var bChanged=false;$('.check-box input[type=checkbox]').each(function(index){if($(this).attr('valueChanged')=='1'){bChanged=true;return;}});$('select').each(function(index){if($(this).attr('valueChanged')=='1'){if(!$(this).hasClass('large')){bChanged=true;return;}}});return bChanged;}
function ResetSlidersChanged()
{$('.check-box input[type=checkbox]').each(function(index){$(this).removeAttr('valueChanged');});$('select').each(function(index){$(this).removeAttr('valueChanged');});}
function removeSliders()
{var _holder=$('.sliders-holder');$('.slide-row').each(function(){$(this).remove();});}
function initPreferances(){var _holder=$('.sliders-holder');_holder.children().not('h4').remove();var _list=$('.check-box input[type=checkbox]');_list.each(function(){var _checkBox=$(this);if(_checkBox.attr('checked'))
createSlider(_checkBox);_checkBox.bind('change',function(){$(this).attr('valueChanged','1');if($('#'+$(this).attr('id')+'_disabled').val()=='1'&&!presetLoading)
{$(this).removeAttr('checked');return false;}
_holder.find('.'+$(this).attr('id')).remove();if($(this).is(':checked')){$(this).val(50);createSlider($(this));}});});function createSlider(_obj)
{$('<div class="slide-row '+_obj.attr('id')+'"><strong class="heading">'+_obj.attr('title')+'</strong><div class="slidebar"></div></div>').appendTo(_holder);var _slider=_holder.find('.'+_obj.attr('id')+' .slidebar');var _inp=$('<input type="hidden" name="range-'+_obj.attr('id')+'" id="range-'+_obj.attr('id')+'" />').insertAfter(_slider);_slider.slider({min:0,range:"min",max:100,step:1,disabled:($('#'+_obj.attr('id')+'_disabled').val()=='1'),value:_obj.val(),slide:function(event,ui){_inp.attr('value',(ui.value));_obj.attr('valueChanged','1');}});_inp.attr('value',(_slider.slider("value")));}
initValidation();}
function initClearForm(){}
function initNavUnderlined(){$('#nav a').find('span').hide()
$('#nav a.active').find('span').show();$('#nav a').each(function(){$(this).mouseenter(function(){$(this).find('span').fadeIn(300);}).mouseleave(function(){if(!$(this).hasClass('active')){$(this).find('span').fadeOut(300);}});});}
function initPriceBox(){$('.holder .box').each(function(){$(this).mouseenter(function(){var _h=$(this).height();$(this).find('.ad-info').animate({top:0},{duration:400,queue:false});$(this).mouseleave(function(){$(this).find('.ad-info').animate({top:-_h},{duration:400,queue:false});});})})}
function clearFormFields(o){if(o.clearInputs==null)o.clearInputs=true;if(o.clearTextareas==null)o.clearTextareas=true;if(o.passwordFieldText==null)o.passwordFieldText=false;if(o.addClassFocus==null)o.addClassFocus=false;if(!o.filterClass)o.filterClass="default";if(o.clearInputs){var inputs=document.getElementsByTagName("input");for(var i=0;i<inputs.length;i++){if((inputs[i].type=="text"||inputs[i].type=="password")&&inputs[i].className.indexOf(o.filterClass)){inputs[i].valueHtml=inputs[i].value;inputs[i].onfocus=function(){if(this.valueHtml==this.value)this.value="";if(this.fake){inputsSwap(this,this.previousSibling);this.previousSibling.focus();}
if(o.addClassFocus&&!this.fake){this.className+=" "+o.addClassFocus;this.parentNode.className+=" parent-"+o.addClassFocus;}}
inputs[i].onblur=function(){if(this.value==""){this.value=this.valueHtml;if(o.passwordFieldText&&this.type=="password")inputsSwap(this,this.nextSibling);}
if(o.addClassFocus){this.className=this.className.replace(o.addClassFocus,"");this.parentNode.className=this.parentNode.className.replace("parent-"+o.addClassFocus,"");}}
if(o.passwordFieldText&&inputs[i].type=="password"){var fakeInput=document.createElement("input");fakeInput.type="text";fakeInput.value=inputs[i].value;fakeInput.className=inputs[i].className;fakeInput.fake=true;inputs[i].parentNode.insertBefore(fakeInput,inputs[i].nextSibling);inputsSwap(inputs[i],null);}}}}
if(o.clearTextareas){var textareas=document.getElementsByTagName("textarea");for(var i=0;i<textareas.length;i++){if(textareas[i].className.indexOf(o.filterClass)){textareas[i].valueHtml=textareas[i].value;textareas[i].onfocus=function(){if(this.value==this.valueHtml)this.value="";if(o.addClassFocus){this.className+=" "+o.addClassFocus;this.parentNode.className+=" parent-"+o.addClassFocus;}}
textareas[i].onblur=function(){if(this.value=="")this.value=this.valueHtml;if(o.addClassFocus){this.className=this.className.replace(o.addClassFocus,"");this.parentNode.className=this.parentNode.className.replace("parent-"+o.addClassFocus,"");}}}}}
function inputsSwap(el,el2){if(el)el.style.display="none";if(el2)el2.style.display="inline";}}
function initValidation(){var _errorClass='incorrect';var _regEmail=/^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;var _regEmails=/^([_.0-9a-z-]+@([0-9a-z][0-9a-z-]+.)+[a-z]{2,4})+([, ]+[_.0-9a-z-]+@([0-9a-z][0-9a-z-]+.)+[a-z]{2,4})*$/;var _regPhone=/^[0-9\-\ \()]+$/;var _regNum=/^[0-9]+$/;var _regDay=/^(([0]{1}[1-9]{1})|([1-9]{1})|([1-2]{1}[0-9]{1})|([3]{1}[0-1]{1}))$/;var _regMon=/^(([0]{1}[1-9]{1})|([1-9]{1})|([1]{1}[0-2]{1}))$/;var _regYear=/^[19]{2}[0-9]{2}$/;$('form.validate').each(function(){var _form=$(this);function checkFields(){var _flag=false;_form.find('.incorect_required').hide();_form.find('.'+_errorClass).removeClass(_errorClass);_form.find('input.required-email').each(function(){if(!_regEmail.test($(this).val()))addError($(this));});_form.find('input.required-day').each(function(){if(!_regDay.test($(this).val()))addError($(this));});_form.find('input.required-mon').each(function(){if(!_regMon.test($(this).val()))addError($(this));});_form.find('input.required-year').each(function(){if(!_regYear.test($(this).val()))addError($(this));});_form.find('textarea.required-many-emails').each(function(){if(!_regEmails.test($(this).val()))addError($(this));});_form.find('input.required-phone').each(function(){if(!_regPhone.test($(this).val()))addError($(this));});_form.find('input.required-num').each(function(){if(!_regNum.test($(this).val()))addError($(this));});_form.find('input.required, textarea.required, select.required').each(function(){if(!$(this).val().length||$(this).val()==$(this).attr('alt'))addError($(this));});_form.find('input.required-chek').each(function(){if(!$(this).is(':checked')){$(this).parent('span').addClass('error-chk');_flag=true;}});_form.find('div.required-radio').each(function(){var _test=false;$(this).find('input[type=radio]').each(function(){if($(this).is(':checked'))_test=true;});if(!_test){_flag=true;}});function addError(_obj)
{$("#cnt"+_obj.attr('name')).show();_flag=true;}
if(_flag)alert("There are required fields not completed!");return _flag;}
_form.submit(function(){if(checkFields()){return false;}else{if(_form.attr('action').indexOf('.php')<=0)
jQuery.post(_form.attr('action'),_form.serialize(),function(msg){var _inpName=_form.find('input.name');var _yourName=$(_inpName).val();$('.register').css({position:'absolute',top:-9999});$('.logged h4 a').html(_yourName);$('.logged').show();});else
return true;return false;}});});}
jQuery.fn.customSelect=function(_options){var _options=jQuery.extend({selectStructure:'<div class="selectArea"><div class="left"></div><div class="sel-center"></div><a href="#" class="selectButton">&nbsp;</a><div class="disabled"></div></div>',hideOnMouseOut:false,copyClass:true,selectText:'.sel-center',selectBtn:'.selectButton',selectDisabled:'.disabled',optStructure:'<div class="selectOptions"><div class="t"></div><ul></ul><div class="b"></div></div>',optList:'ul'},_options);return this.each(function(){var select=jQuery(this);if(!select.hasClass('outtaHere')){if(select.is(':visible')){var hideOnMouseOut=_options.hideOnMouseOut;var copyClass=_options.copyClass;var replaced=jQuery(_options.selectStructure);var selectText=replaced.find(_options.selectText);var selectBtn=replaced.find(_options.selectBtn);var selectDisabled=replaced.find(_options.selectDisabled).hide();var optHolder=jQuery(_options.optStructure);var optList=optHolder.find(_options.optList);if(copyClass){optHolder.addClass('drop'+select.attr('class'));replaced.addClass(select.attr('class'));}
select.change(function(){selectText.html($('#'+$(this).attr('id')+" option:selected").text());});if(select.attr('disabled'))selectDisabled.show();select.find('option').each(function(){var selOpt=$(this);var _opt=jQuery('<li><a href="#">'+selOpt.html()+'</a></li>');if(selOpt.attr('selected')){selectText.html(selOpt.html());_opt.addClass('selected');}
_opt.children('a').click(function(){optList.find('li').removeClass('selected');select.find('option').removeAttr('selected');$(this).parent().addClass('selected');selOpt.attr('selected','selected');selectText.html(selOpt.html());select.change();optHolder.hide();select.attr('valueChanged','1');return false;});optList.append(_opt);});replaced.width(select.outerWidth());replaced.insertBefore(select);optHolder.css({width:select.outerWidth(),display:'none',position:'absolute'});jQuery(document.body).append(optHolder);var optTimer;replaced.hover(function(){if(optTimer)clearTimeout(optTimer);},function(){if(hideOnMouseOut){optTimer=setTimeout(function(){optHolder.hide();},200);}});optHolder.hover(function(){if(optTimer)clearTimeout(optTimer);},function(){if(hideOnMouseOut){optTimer=setTimeout(function(){optHolder.hide();},200);}});$("body").click(function(e){if(e.target.className!="selectOptions")
if(optHolder.is(':visible'))
optHolder.hide();});selectBtn.click(function(){if(optHolder.is(':visible')){optHolder.hide();}
else{optHolder.children('ul').css({height:'auto',overflow:'hidden','z-index':'auto'});optHolder.css({top:replaced.offset().top+replaced.outerHeight(),left:replaced.offset().left,display:'block'});if(optHolder.children('ul').height()>200)optHolder.children('ul').css({height:200,overflow:'auto'});}
return false;});select.addClass('outtaHere');}}});}
jQuery.fn.customRadio=function(_options){var _options=jQuery.extend({radioStructure:'<div></div>',radioDisabled:'disabled',radioDefault:'radioArea',radioChecked:'radioAreaChecked'},_options);return this.each(function(){var radio=jQuery(this);if(!radio.hasClass('outtaHere')&&radio.is(':radio')){var replaced=jQuery(_options.radioStructure);this._replaced=replaced;if(radio.is(':disabled'))replaced.addClass(_options.radioDisabled);else if(radio.is(':checked'))replaced.addClass(_options.radioChecked);else replaced.addClass(_options.radioDefault);replaced.click(function(){if($(this).hasClass(_options.radioDefault)){radio.attr('checked','checked');changeRadio(radio.get(0));}});radio.click(function(){changeRadio(this);});replaced.insertBefore(radio);radio.addClass('outtaHere');}});function changeRadio(_this){$(_this).change();$('input:radio[name='+$(_this).attr("name")+']').not(_this).each(function(){if(this._replaced&&!$(this).is(':disabled'))this._replaced.removeClass().addClass(_options.radioDefault);});_this._replaced.removeClass().addClass(_options.radioChecked);}}
jQuery.fn.customCheckbox=function(_options){var _options=jQuery.extend({checkboxStructure:'<div></div>',checkboxDisabled:'checkboxArea',checkboxDefault:'checkboxArea',checkboxChecked:'checkboxAreaChecked'},_options);return this.each(function(){var checkbox=jQuery(this);if(!checkbox.hasClass('outtaHere')&&checkbox.is(':checkbox')){var replaced=jQuery(_options.checkboxStructure);this._replaced=replaced;var label=checkbox.parent().find('label');if(checkbox.is(':disabled'))replaced.addClass(_options.checkboxDisabled);else if(checkbox.is(':checked'))replaced.addClass(_options.checkboxChecked);else replaced.addClass(_options.checkboxDefault);replaced.attr('id',checkbox.attr('id'));replaced.click(function(){if(checkbox.is(':disabled'))return false;if(checkbox.is(':checked'))checkbox.removeAttr('checked');else checkbox.attr('checked','checked');changeCheckbox(checkbox);});var lbl=$("label[for='"+checkbox.attr('id')+"']");if(lbl.length<=0){var parentElem=checkbox.parent(),parentTagName=parentElem.get(0).tagName.toLowerCase();if(parentTagName=="label"){lbl=parentElem;}}
if(lbl.length>0)
lbl.click(function(){replaced.trigger('click');});checkbox.click(function(){changeCheckbox(checkbox);});replaced.insertBefore(checkbox);checkbox.addClass('outtaHere');}});function changeCheckbox(_this){_this.change();if(_this.is(':checked'))_this.get(0)._replaced.removeClass().addClass(_options.checkboxChecked);else _this.get(0)._replaced.removeClass().addClass(_options.checkboxDefault);}};jQuery.fn.OpenClose=function(_options){var _options=jQuery.extend({activeClass:'active',opener:'.opener',slider:'.slide',animSpeed:400,animStart:false,animEnd:false,effect:'fade',event:'click'},_options);return this.each(function(){var _holder=jQuery(this);var _slideSpeed=_options.animSpeed;var _activeClass=_options.activeClass;var _opener=jQuery(_options.opener,_holder);var _slider=jQuery(_options.slider,_holder);var _animStart=_options.animStart;var _animEnd=_options.animEnd;var _effect=_options.effect;var _event=_options.event;if(_slider.length){_opener.bind(_event,function(){if(!_slider.is(':animated')){if(typeof _animStart==='function')_animStart();if(_holder.hasClass(_activeClass)){_slider[_effect=='fade'?'fadeOut':'slideUp'](_slideSpeed,function(){if(typeof _animEnd==='function')_animEnd();});_holder.removeClass(_activeClass);}else{_holder.addClass(_activeClass);_slider[_effect=='fade'?'fadeIn':'slideDown'](_slideSpeed,function(){if(typeof _animEnd==='function')_animEnd();});}}
return false;});if(_holder.hasClass(_activeClass))_slider.show();else _slider.hide();}});}
function initOpenClose(){jQuery('.slide-box').OpenClose({activeClass:'active',opener:'a.open',slider:'div.block',effect:'slide',animSpeed:500});}
(function($){$.extend({tablesorter:new function(){var parsers=[],widgets=[];this.defaults={cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:false,cancelSelection:true,sortList:[],headerList:[],dateFormat:"us",decimal:".",debug:false};function benchmark(s,d){log(s+","+(new Date().getTime()-d.getTime())+"ms")}this.benchmark=benchmark;function log(s){if(typeof console!="undefined"&&typeof console.debug!="undefined"){console.log(s)}else{alert(s)}}function buildParserCache(table,$headers){if(table.config.debug){var parsersDebug=""}var rows=table.tBodies[0].rows;if(table.tBodies[0].rows[0]){var list=[],cells=rows[0].cells,l=cells.length;for(var i=0;i<l;i++){var p=false;if($.metadata&&($($headers[i]).metadata()&&$($headers[i]).metadata().sorter)){p=getParserById($($headers[i]).metadata().sorter)}else{if((table.config.headers[i]&&table.config.headers[i].sorter)){p=getParserById(table.config.headers[i].sorter)}}if(!p){p=detectParserForColumn(table,cells[i])}if(table.config.debug){parsersDebug+="column:"+i+" parser:"+p.id+"\n"}list.push(p)}}if(table.config.debug){log(parsersDebug)}return list}function detectParserForColumn(table,node){var l=parsers.length;for(var i=1;i<l;i++){if(parsers[i].is($.trim(getElementText(table.config,node)),table,node)){return parsers[i]}}return parsers[0]}function getParserById(name){var l=parsers.length;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==name.toLowerCase()){return parsers[i]}}return false}function buildCache(table){if(table.config.debug){var cacheTime=new Date()}var totalRows=(table.tBodies[0]&&table.tBodies[0].rows.length)||0,totalCells=(table.tBodies[0].rows[0]&&table.tBodies[0].rows[0].cells.length)||0,parsers=table.config.parsers,cache={row:[],normalized:[]};for(var i=0;i<totalRows;++i){var c=table.tBodies[0].rows[i],cols=[];cache.row.push($(c));for(var j=0;j<totalCells;++j){cols.push(parsers[j].format(getElementText(table.config,c.cells[j]),table,c.cells[j]))}cols.push(i);cache.normalized.push(cols);cols=null}if(table.config.debug){benchmark("Building cache for "+totalRows+" rows:",cacheTime)}return cache}function getElementText(config,node){if(!node){return""}var t="";if(config.textExtraction=="simple"){if(node.childNodes[0]&&node.childNodes[0].hasChildNodes()){t=node.childNodes[0].innerHTML}else{t=node.innerHTML}}else{if(typeof(config.textExtraction)=="function"){t=config.textExtraction(node)}else{t=$(node).text()}}return t}function appendToTable(table,cache){if(table.config.debug){var appendTime=new Date()}var c=cache,r=c.row,n=c.normalized,totalRows=n.length,checkCell=(n[0].length-1),tableBody=$(table.tBodies[0]),rows=[];for(var i=0;i<totalRows;i++){rows.push(r[n[i][checkCell]]);if(!table.config.appender){var o=r[n[i][checkCell]];var l=o.length;for(var j=0;j<l;j++){tableBody[0].appendChild(o[j])}}}if(table.config.appender){table.config.appender(table,rows)}rows=null;if(table.config.debug){benchmark("Rebuilt table:",appendTime)}applyWidget(table);setTimeout(function(){$(table).trigger("sortEnd")},0)}function buildHeaders(table){if(table.config.debug){var time=new Date()}var meta=($.metadata)?true:false,tableHeadersRows=[];for(var i=0;i<table.tHead.rows.length;i++){tableHeadersRows[i]=0}$tableHeaders=$("thead th",table);$tableHeaders.each(function(index){this.count=0;this.column=index;this.order=formatSortingOrder(table.config.sortInitialOrder);if(checkHeaderMetadata(this)||checkHeaderOptions(table,index)){this.sortDisabled=true}if(!this.sortDisabled){$(this).addClass(table.config.cssHeader)}table.config.headerList[index]=this});if(table.config.debug){benchmark("Built headers:",time);log($tableHeaders)}return $tableHeaders}function checkCellColSpan(table,rows,row){var arr=[],r=table.tHead.rows,c=r[row].cells;for(var i=0;i<c.length;i++){var cell=c[i];if(cell.colSpan>1){arr=arr.concat(checkCellColSpan(table,headerArr,row++))}else{if(table.tHead.length==1||(cell.rowSpan>1||!r[row+1])){arr.push(cell)}}}return arr}function checkHeaderMetadata(cell){if(($.metadata)&&($(cell).metadata().sorter===false)){return true}return false}function checkHeaderOptions(table,i){if((table.config.headers[i])&&(table.config.headers[i].sorter===false)){return true}return false}function applyWidget(table){var c=table.config.widgets;var l=c.length;for(var i=0;i<l;i++){getWidgetById(c[i]).format(table)}}function getWidgetById(name){var l=widgets.length;for(var i=0;i<l;i++){if(widgets[i].id.toLowerCase()==name.toLowerCase()){return widgets[i]}}}function formatSortingOrder(v){if(typeof(v)!="Number"){i=(v.toLowerCase()=="desc")?1:0}else{i=(v==(0||1))?v:0}return i}function isValueInArray(v,a){var l=a.length;for(var i=0;i<l;i++){if(a[i][0]==v){return true}}return false}function setHeadersCss(table,$headers,list,css){$headers.removeClass(css[0]).removeClass(css[1]);var h=[];$headers.each(function(offset){if(!this.sortDisabled){h[this.column]=$(this)}});var l=list.length;for(var i=0;i<l;i++){h[list[i][0]].addClass(css[list[i][1]])}}function fixColumnWidth(table,$headers){var c=table.config;if(c.widthFixed){var colgroup=$("<colgroup>");$("tr:first td",table.tBodies[0]).each(function(){colgroup.append($("<col>").css("width",$(this).width()))});$(table).prepend(colgroup)}}function updateHeaderSortCount(table,sortList){var c=table.config,l=sortList.length;for(var i=0;i<l;i++){var s=sortList[i],o=c.headerList[s[0]];o.count=s[1];o.count++}}function multisort(table,sortList,cache){if(table.config.debug){var sortTime=new Date()}var dynamicExp="var sortWrapper = function(a,b) {",l=sortList.length;for(var i=0;i<l;i++){var c=sortList[i][0];var order=sortList[i][1];var s=(getCachedSortType(table.config.parsers,c)=="text")?((order==0)?"sortText":"sortTextDesc"):((order==0)?"sortNumeric":"sortNumericDesc");var e="e"+i;dynamicExp+="var "+e+" = "+s+"(a["+c+"],b["+c+"]); ";dynamicExp+="if("+e+") { return "+e+"; } ";dynamicExp+="else { "}var orgOrderCol=cache.normalized[0].length-1;dynamicExp+="return a["+orgOrderCol+"]-b["+orgOrderCol+"];";for(var i=0;i<l;i++){dynamicExp+="}; "}dynamicExp+="return 0; ";dynamicExp+="}; ";eval(dynamicExp);cache.normalized.sort(sortWrapper);if(table.config.debug){benchmark("Sorting on "+sortList.toString()+" and dir "+order+" time:",sortTime)}return cache}function sortText(a,b){return((a<b)?-1:((a>b)?1:0))}function sortTextDesc(a,b){return((b<a)?-1:((b>a)?1:0))}function sortNumeric(a,b){return a-b}function sortNumericDesc(a,b){return b-a}function getCachedSortType(parsers,i){return parsers[i].type}this.construct=function(settings){return this.each(function(){if(!this.tHead||!this.tBodies){return}var $this,$document,$headers,cache,config,shiftDown=0,sortOrder;this.config={};config=$.extend(this.config,$.tablesorter.defaults,settings);$this=$(this);$headers=buildHeaders(this);this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this);var sortCSS=[config.cssDesc,config.cssAsc];fixColumnWidth(this);$headers.click(function(e){$this.trigger("sortStart");var totalRows=($this[0].tBodies[0]&&$this[0].tBodies[0].rows.length)||0;if(!this.sortDisabled&&totalRows>0){var $cell=$(this);var i=this.column;this.order=this.count++%2;if(!e[config.sortMultiSortKey]){config.sortList=[];if(config.sortForce!=null){var a=config.sortForce;for(var j=0;j<a.length;j++){if(a[j][0]!=i){config.sortList.push(a[j])}}}config.sortList.push([i,this.order])}else{if(isValueInArray(i,config.sortList)){for(var j=0;j<config.sortList.length;j++){var s=config.sortList[j],o=config.headerList[s[0]];if(s[0]==i){o.count=s[1];o.count++;s[1]=o.count%2}}}else{config.sortList.push([i,this.order])}}setTimeout(function(){setHeadersCss($this[0],$headers,config.sortList,sortCSS);appendToTable($this[0],multisort($this[0],config.sortList,cache))},1);return false}}).mousedown(function(){if(config.cancelSelection){this.onselectstart=function(){return false};return false}});$this.bind("update",function(){this.config.parsers=buildParserCache(this,$headers);cache=buildCache(this)}).bind("sorton",function(e,list){$(this).trigger("sortStart");config.sortList=list;var sortList=config.sortList;updateHeaderSortCount(this,sortList);setHeadersCss(this,$headers,sortList,sortCSS);appendToTable(this,multisort(this,sortList,cache))}).bind("appendCache",function(){appendToTable(this,cache)}).bind("applyWidgetId",function(e,id){getWidgetById(id).format(this)}).bind("applyWidgets",function(){applyWidget(this)});if($.metadata&&($(this).metadata()&&$(this).metadata().sortlist)){config.sortList=$(this).metadata().sortlist}if(config.sortList.length>0){$this.trigger("sorton",[config.sortList])}applyWidget(this)})};this.addParser=function(parser){var l=parsers.length,a=true;for(var i=0;i<l;i++){if(parsers[i].id.toLowerCase()==parser.id.toLowerCase()){a=false}}if(a){parsers.push(parser)}};this.addWidget=function(widget){widgets.push(widget)};this.formatFloat=function(s){var i=parseFloat(s);return(isNaN(i))?0:i};this.formatInt=function(s){var i=parseInt(s);return(isNaN(i))?0:i};this.isDigit=function(s,config){var DECIMAL="\\"+config.decimal;var exp="/(^[+]?0("+DECIMAL+"0+)?$)|(^([-+]?[1-9][0-9]*)$)|(^([-+]?((0?|[1-9][0-9]*)"+DECIMAL+"(0*[1-9][0-9]*)))$)|(^[-+]?[1-9]+[0-9]*"+DECIMAL+"0+$)/";return RegExp(exp).test($.trim(s))};this.clearTableBody=function(table){if($.browser.msie){function empty(){while(this.firstChild){this.removeChild(this.firstChild)}}empty.apply(table.tBodies[0])}else{table.tBodies[0].innerHTML=""}}}});$.fn.extend({tablesorter:$.tablesorter.construct});var ts=$.tablesorter;ts.addParser({id:"text",is:function(s){return true},format:function(s){return $.trim(s.toLowerCase())},type:"text"});ts.addParser({id:"digit",is:function(s,table){var c=table.config;return $.tablesorter.isDigit(s,c)},format:function(s){return $.tablesorter.formatFloat(s)},type:"numeric"});ts.addParser({id:"currency",is:function(s){return/^[£$€?.]/.test(s)},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/[^0-9.]/g),""))},type:"numeric"});ts.addParser({id:"ipAddress",is:function(s){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(s)},format:function(s){var a=s.split("."),r="",l=a.length;for(var i=0;i<l;i++){var item=a[i];if(item.length==2){r+="0"+item}else{r+=item}}return $.tablesorter.formatFloat(r)},type:"numeric"});ts.addParser({id:"url",is:function(s){return/^(https?|ftp|file):\/\/$/.test(s)},format:function(s){return jQuery.trim(s.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});ts.addParser({id:"isoDate",is:function(s){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(s)},format:function(s){return $.tablesorter.formatFloat((s!="")?new Date(s.replace(new RegExp(/-/g),"/")).getTime():"0")},type:"numeric"});ts.addParser({id:"percent",is:function(s){return/\%$/.test($.trim(s))},format:function(s){return $.tablesorter.formatFloat(s.replace(new RegExp(/%/g),""))},type:"numeric"});ts.addParser({id:"usLongDate",is:function(s){return s.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(s){return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"shortDate",is:function(s){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(s)},format:function(s,table){var c=table.config;s=s.replace(/\-/g,"/");if(c.dateFormat=="us"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$1/$2")}else{if(c.dateFormat=="uk"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1")}else{if(c.dateFormat=="dd/mm/yy"||c.dateFormat=="dd-mm-yy"){s=s.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3")}}}return $.tablesorter.formatFloat(new Date(s).getTime())},type:"numeric"});ts.addParser({id:"time",is:function(s){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(s)},format:function(s){return $.tablesorter.formatFloat(new Date("2000/01/01 "+s).getTime())},type:"numeric"});ts.addParser({id:"metadata",is:function(s){return false},format:function(s,table,cell){var c=table.config,p=(!c.parserMetadataName)?"sortValue":c.parserMetadataName;return $(cell).metadata()[p]},type:"numeric"});ts.addWidget({id:"zebra",format:function(table){if(table.config.debug){var time=new Date()}$("tr:visible",table.tBodies[0]).filter(":even").removeClass(table.config.widgetZebra.css[1]).addClass(table.config.widgetZebra.css[0]).end().filter(":odd").removeClass(table.config.widgetZebra.css[0]).addClass(table.config.widgetZebra.css[1]);if(table.config.debug){$.tablesorter.benchmark("Applying Zebra widget",time)}}})})(jQuery);(function($){$.fn.columnize=function(options){var defaults={width:400,columns:false,buildOnce:false,overflow:false,doneFunc:function(){},target:false,ignoreImageLoading:true,float:"left",lastNeverTallest:false};var options=$.extend(defaults,options);return this.each(function(){var $inBox=options.target?$(options.target):$(this);var maxHeight=$(this).height();var $cache=$('<div></div>');var lastWidth=0;var columnizing=false;$cache.append($(this).children().clone(true));if(!options.ignoreImageLoading&&!options.target){if(!$inBox.data("imageLoaded")){$inBox.data("imageLoaded",true);if($(this).find("img").length>0){var func=function($inBox,$cache){return function(){if(!$inBox.data("firstImageLoaded")){$inBox.data("firstImageLoaded","true");$inBox.empty().append($cache.children().clone(true));$inBox.columnize(options);}}}($(this),$cache);$(this).find("img").one("load",func);$(this).find("img").one("abort",func);return;}}}
$inBox.empty();columnizeIt();if(!options.buildOnce){$(window).resize(function(){if(!options.buildOnce&&$.browser.msie){if($inBox.data("timeout")){clearTimeout($inBox.data("timeout"));}
$inBox.data("timeout",setTimeout(columnizeIt,200));}else if(!options.buildOnce){columnizeIt();}else{}});}
function columnize($putInHere,$pullOutHere,$parentColumn,height){while($parentColumn.height()<height&&$pullOutHere[0].childNodes.length){$putInHere.append($pullOutHere[0].childNodes[0]);}
if($putInHere[0].childNodes.length==0)return;var kids=$putInHere[0].childNodes;var lastKid=kids[kids.length-1];$putInHere[0].removeChild(lastKid);var $item=$(lastKid);if($item[0].nodeType==3){var oText=$item[0].nodeValue;var counter2=options.width/18;if(options.accuracy)
counter2=options.accuracy;var columnText;var latestTextNode=null;while($parentColumn.height()<height&&oText.length){if(oText.indexOf(' ',counter2)!='-1'){columnText=oText.substring(0,oText.indexOf(' ',counter2));}else{columnText=oText;}
latestTextNode=document.createTextNode(columnText);$putInHere.append(latestTextNode);if(oText.length>counter2){oText=oText.substring(oText.indexOf(' ',counter2));}else{oText="";}}
if($parentColumn.height()>=height&&latestTextNode!=null){$putInHere[0].removeChild(latestTextNode);oText=latestTextNode.nodeValue+oText;}
if(oText.length){$item[0].nodeValue=oText;}else{return false;}}
if($pullOutHere.children().length){$pullOutHere.prepend($item);}else{$pullOutHere.append($item);}
return $item[0].nodeType==3;}
function split($putInHere,$pullOutHere,$parentColumn,height){if($pullOutHere.children().length){$cloneMe=$pullOutHere.children(":first");$clone=$cloneMe.clone(true);if($clone.attr("nodeType")==1&&!$clone.hasClass("dontend")){$putInHere.append($clone);if($clone.is("img")&&$parentColumn.height()<height+20){$cloneMe.remove();}else if(!$cloneMe.hasClass("dontsplit")&&$parentColumn.height()<height+20){$cloneMe.remove();}else if($clone.is("img")||$cloneMe.hasClass("dontsplit")){$clone.remove();}else{$clone.empty();if(!columnize($clone,$cloneMe,$parentColumn,height)){if($cloneMe.children().length){split($clone,$cloneMe,$parentColumn,height);}}
if($clone.get(0).childNodes.length==0){$clone.remove();}}}}}
function singleColumnizeIt(){if($inBox.data("columnized")&&$inBox.children().length==1){return;}
$inBox.data("columnized",true);$inBox.data("columnizing",true);$inBox.empty();$inBox.append($("<div class='first last column' style='width:98%; padding: 3px; float: "+options.float+";'></div>"));$col=$inBox.children().eq($inBox.children().length-1);$destroyable=$cache.clone(true);if(options.overflow){targetHeight=options.overflow.height;columnize($col,$destroyable,$col,targetHeight);if(!$destroyable.children().find(":first-child").hasClass("dontend")){split($col,$destroyable,$col,targetHeight);}
while(checkDontEndColumn($col.children(":last").length&&$col.children(":last").get(0))){var $lastKid=$col.children(":last");$lastKid.remove();$destroyable.prepend($lastKid);}
var html="";var div=document.createElement('DIV');while($destroyable[0].childNodes.length>0){var kid=$destroyable[0].childNodes[0];for(var i=0;i<kid.attributes.length;i++){if(kid.attributes[i].nodeName.indexOf("jQuery")==0){kid.removeAttribute(kid.attributes[i].nodeName);}}
div.innerHTML="";div.appendChild($destroyable[0].childNodes[0]);html+=div.innerHTML;}
var overflow=$(options.overflow.id)[0];overflow.innerHTML=html;}else{$col.append($destroyable);}
$inBox.data("columnizing",false);if(options.overflow){options.overflow.doneFunc();}}
function checkDontEndColumn(dom){if(dom.nodeType!=1)return false;if($(dom).hasClass("dontend"))return true;if(dom.childNodes.length==0)return false;return checkDontEndColumn(dom.childNodes[dom.childNodes.length-1]);}
function columnizeIt(){if(lastWidth==$inBox.width())return;lastWidth=$inBox.width();var numCols=Math.round($inBox.width()/options.width);if(options.columns)numCols=options.columns;if(numCols<=1){return singleColumnizeIt();}
if($inBox.data("columnizing"))return;$inBox.data("columnized",true);$inBox.data("columnizing",true);$inBox.empty();$inBox.append($("<div style='width:"+(Math.round(100/numCols)-2)+"%; padding: 3px; float: "+options.float+";'></div>"));$col=$inBox.children(":last");$col.append($cache.clone());maxHeight=$col.height();$inBox.empty();var targetHeight=maxHeight/numCols;var firstTime=true;var maxLoops=3;var scrollHorizontally=false;if(options.overflow){maxLoops=1;targetHeight=options.overflow.height;}else if(options.height&&options.width){maxLoops=1;targetHeight=options.height;scrollHorizontally=true;}
for(var loopCount=0;loopCount<maxLoops;loopCount++){$inBox.empty();var $destroyable;try{$destroyable=$cache.clone(true);}catch(e){$destroyable=$cache.clone();}
$destroyable.css("visibility","hidden");for(var i=0;i<numCols;i++){var className=(i==0)?"first column":"column";var className=(i==numCols-1)?("last "+className):className;$inBox.append($("<div class='"+className+"' style='width:"+(Math.round($inBox.width()/numCols)-20)+"px; float: "+options.float+";'></div>"));}
var i=0;while(i<numCols-(options.overflow?0:1)||scrollHorizontally&&$destroyable.children().length){if($inBox.children().length<=i){$inBox.append($("<div class='"+className+"' style='width:"+(Math.round(100/numCols)-2)+"%; float: "+options.float+";'></div>"));}
var $col=$inBox.children().eq(i);columnize($col,$destroyable,$col,targetHeight);if(!$destroyable.children().find(":first-child").hasClass("dontend")){split($col,$destroyable,$col,targetHeight);}else{}
while(checkDontEndColumn($col.children(":last").length&&$col.children(":last").get(0))){var $lastKid=$col.children(":last");$lastKid.remove();$destroyable.prepend($lastKid);}
i++;}
if(options.overflow&&!scrollHorizontally){var IE6=false/*@cc_on||@_jscript_version<5.7 @*/;var IE7=(document.all)&&(navigator.appVersion.indexOf("MSIE 7.")!=-1);if(IE6||IE7){var html="";var div=document.createElement('DIV');while($destroyable[0].childNodes.length>0){var kid=$destroyable[0].childNodes[0];for(var i=0;i<kid.attributes.length;i++){if(kid.attributes[i].nodeName.indexOf("jQuery")==0){kid.removeAttribute(kid.attributes[i].nodeName);}}
div.innerHTML="";div.appendChild($destroyable[0].childNodes[0]);html+=div.innerHTML;}
var overflow=$(options.overflow.id)[0];overflow.innerHTML=html;}else{$(options.overflow.id).empty().append($destroyable.children().clone(true));}}else if(!scrollHorizontally){$col=$inBox.children().eq($inBox.children().length-1);while($destroyable.children().length)$col.append($destroyable.children(":first"));var afterH=$col.height();var diff=afterH-targetHeight;var totalH=0;var min=10000000;var max=0;var lastIsMax=false;$inBox.children().each(function($inBox){return function($item){var h=$inBox.children().eq($item).height();lastIsMax=false;totalH+=h;if(h>max){max=h;lastIsMax=true;}
if(h<min)min=h;}}($inBox));var avgH=totalH/numCols;if(options.lastNeverTallest&&lastIsMax){targetHeight=targetHeight+30;if(loopCount==maxLoops-1)maxLoops++;}else if(max-min>30){targetHeight=avgH+30;}else if(Math.abs(avgH-targetHeight)>20){targetHeight=avgH;}else{loopCount=maxLoops;}}else{$inBox.children().each(function(i){$col=$inBox.children().eq(i);$col.width(options.width+"px");if(i==0){$col.addClass("first");}else if(i==$inBox.children().length-1){$col.addClass("last");}else{$col.removeClass("first");$col.removeClass("last");}});$inBox.width($inBox.children().length*options.width+"px");}
$inBox.append($("<br style='clear:both;'>"));}
$inBox.find('.column').find(':first.removeiffirst').remove();$inBox.find('.column').find(':last.removeiflast').remove();$inBox.data("columnizing",false);if(options.overflow){options.overflow.doneFunc();}
options.doneFunc();}});};})(jQuery);